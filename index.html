<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SFUSD Budget Simulator - Labor Proposals & Required Cuts</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 0;
            color: #333;
            padding-top: 290px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px 20px 20px;
        }

        .fixed-banner {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: white;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            z-index: 1000;
            padding: 15px 20px;
        }

        .banner-content {
            max-width: 1400px;
            margin: 0 auto;
        }

        .banner-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }

        .banner-header h1 {
            color: #667eea;
            font-size: 1.8rem;
            margin: 0;
        }

        .banner-header p {
            color: #666;
            font-size: 0.9rem;
            margin: 0;
        }

        .banner-title {
            color: #667eea;
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .banner-section {
            margin-bottom: 12px;
        }

        .banner-page-tabs {
            display: flex;
            gap: 8px;
        }

        .banner-page-tab {
            flex: 1;
            padding: 10px 15px;
            border: 2px solid #e0e0e0;
            background: #f8f9fa;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            text-align: center;
        }

        .banner-page-tab:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .banner-page-tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
        }

        .banner-page-tab.active.cuts-tab {
            background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
            border-color: #dc2626;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            display: none; /* Hidden since we moved to banner */
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
            display: none;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.95;
            display: none;
        }

        .page-tabs {
            display: none; /* Hidden - using banner tabs now */
        }

        .page-section {
            display: none;
        }

        .page-section.active {
            display: block;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .card h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.5rem;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
        }

        .card.cuts-section h2 {
            color: #dc2626;
        }

        .proposal-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 8px;
        }

        .proposal-btn {
            padding: 12px;
            border: 2px solid #e0e0e0;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.85rem;
            font-weight: 600;
            text-align: center;
        }

        .proposal-btn:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
        }

        .proposal-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
        }

        .custom-controls {
            margin-top: 0;
            padding: 20px;
            background: #f8f9ff;
            border-radius: 8px;
        }

        .custom-controls:not(.active) {
            display: none;
        }

        .custom-controls.active {
            display: block;
        }

        .slider-group {
            margin-bottom: 20px;
        }

        .slider-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #555;
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .slider {
            flex: 1;
            -webkit-appearance: none;
            appearance: none;
            height: 8px;
            border-radius: 5px;
            background: #d3d3d3;
            outline: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }

        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            border: none;
        }

        .slider-value {
            min-width: 80px;
            font-weight: 600;
            color: #667eea;
            font-size: 1.1rem;
        }

        .checkbox-group {
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .checkbox-group input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .checkbox-group label {
            cursor: pointer;
            font-weight: 500;
        }

        .cost-item {
            display: flex;
            justify-content: space-between;
            padding: 12px;
            margin-bottom: 8px;
            background: #f8f9fa;
            border-radius: 6px;
            align-items: center;
        }

        .cost-item.total {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 700;
            font-size: 1.2rem;
            margin-top: 15px;
        }

        .cost-label {
            flex: 1;
        }

        .cost-value {
            font-weight: 600;
            color: #667eea;
            font-size: 1.1rem;
        }

        .cost-item.total .cost-value {
            color: white;
        }

        .budget-bar {
            margin-top: 20px;
        }

        .budget-bar-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
            color: #666;
        }

        .budget-bar-track {
            height: 40px;
            background: #e0e0e0;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
        }

        .budget-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981 0%, #f59e0b 50%, #ef4444 100%);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
        }

        .impact-summary {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            font-weight: 600;
        }

        .impact-summary.positive {
            background: #d1fae5;
            color: #065f46;
        }

        .impact-summary.warning {
            background: #fef3c7;
            color: #92400e;
        }

        .impact-summary.critical {
            background: #fee2e2;
            color: #991b1b;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .info-card {
            background: #f8f9ff;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .info-card.cuts-card {
            border-left-color: #dc2626;
        }

        .info-card h3 {
            color: #667eea;
            margin-bottom: 8px;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .info-card.cuts-card h3 {
            color: #dc2626;
        }

        .info-card .value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #333;
        }

        .comparison-table {
            width: 100%;
            margin-top: 20px;
            border-collapse: collapse;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        .comparison-table th {
            background: #f8f9ff;
            color: #667eea;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .comparison-table tr:hover {
            background: #f8f9fa;
        }

        .footer {
            text-align: center;
            color: white;
            margin-top: 30px;
            opacity: 0.9;
            font-size: 0.9rem;
        }

        .alert {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }

        .alert strong {
            color: #92400e;
        }

        .alert.cuts-alert {
            background: #fee2e2;
            border-left-color: #dc2626;
        }

        .alert.cuts-alert strong {
            color: #991b1b;
        }

        /* Cuts page specific styles */
        .cuts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .cut-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #dc2626;
            transition: all 0.3s ease;
            cursor: pointer;
            user-select: none;
        }

        .cut-item:hover {
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.15);
            background: #fff;
        }

        .cut-item.selected {
            background: #fee2e2;
            border-left-color: #991b1b;
            box-shadow: 0 2px 8px rgba(220, 38, 38, 0.2);
        }

        .cut-item.has-slider {
            cursor: default;
        }

        .cut-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 10px;
        }

        .cut-title {
            font-weight: 600;
            color: #333;
            font-size: 1.05rem;
        }

        .cut-amount {
            font-weight: 700;
            color: #dc2626;
            font-size: 1.1rem;
            white-space: nowrap;
            margin-left: 10px;
        }

        .cut-description {
            font-size: 0.9rem;
            color: #666;
            line-height: 1.5;
            margin-bottom: 12px;
        }

        .cut-controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .cut-checkbox {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .cut-slider-container {
            flex: 1;
            display: none;
        }

        .cut-item.has-slider .cut-slider-container {
            display: block;
        }

        .cut-slider {
            width: 100%;
            -webkit-appearance: none;
            appearance: none;
            height: 6px;
            border-radius: 5px;
            background: #d3d3d3;
            outline: none;
        }

        .cut-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #dc2626;
            cursor: pointer;
        }

        .cut-slider::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #dc2626;
            cursor: pointer;
            border: none;
        }

        .slider-label {
            font-size: 0.85rem;
            color: #666;
            margin-top: 5px;
        }

        .category-header {
            background: #f8f9ff;
            padding: 12px 15px;
            border-radius: 8px;
            margin: 20px 0 15px 0;
            border-left: 4px solid #dc2626;
        }

        .category-header h3 {
            color: #dc2626;
            font-size: 1.1rem;
            margin: 0;
        }

        .impact-note {
            margin-top: 10px;
            padding: 10px;
            background: #fef3c7;
            border-radius: 6px;
            font-size: 0.85rem;
            color: #78350f;
        }

        .progress-section {
            margin-top: 30px;
        }

        .progress-bar-container {
            background: #e0e0e0;
            height: 50px;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            margin-top: 10px;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #dc2626 0%, #991b1b 100%);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 1.2rem;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.95rem;
            color: #666;
        }

        .status-message {
            margin-top: 20px;
            padding: 20px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1.05rem;
        }

        .status-message.deficit {
            background: #fee2e2;
            color: #991b1b;
            border-left: 4px solid #dc2626;
        }

        .status-message.balanced {
            background: #d1fae5;
            color: #065f46;
            border-left: 4px solid #10b981;
        }

        .status-message.surplus {
            background: #dbeafe;
            color: #1e40af;
            border-left: 4px solid #3b82f6;
        }

        .next-step-banner {
            margin-top: 20px;
            padding: 20px;
            background: #fef3c7;
            border-radius: 8px;
            border-left: 4px solid #f59e0b;
        }

        .next-step-banner h3 {
            color: #92400e;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .next-step-banner p {
            color: #78350f;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .next-step-banner button {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            font-size: 1rem;
            box-shadow: 0 2px 8px rgba(217, 119, 6, 0.3);
            transition: all 0.3s ease;
        }

        .next-step-banner button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(217, 119, 6, 0.4);
        }
    </style>
</head>
<body>
    <div class="fixed-banner">
        <div class="banner-content">
            <div class="banner-header">
                <div>
                    <h1>üè´ SFUSD Budget Simulator</h1>
                    <p>Explore labor proposals and required budget cuts for 2025-27</p>
                </div>
                <div style="text-align: right;">
                    <div style="font-size: 0.85rem; color: #666; margin-bottom: 5px;">2026-27 Budget Gap</div>
                    <div style="font-size: 1.8rem; font-weight: 700; color: #dc2626;" id="bannerTotalGap">$102.0M</div>
                    <div style="font-size: 0.75rem; color: #888; margin-top: 3px;">
                        <span id="bannerBreakdown">Base deficit only</span>
                    </div>
                </div>
            </div>

            <div class="banner-section">
                <div class="banner-page-tabs">
                    <button class="banner-page-tab active" onclick="switchPage('proposals')">
                        üíº Labor Proposals
                    </button>
                    <button class="banner-page-tab cuts-tab" onclick="switchPage('cuts')">
                        ‚úÇÔ∏è Required Cuts
                    </button>
                </div>
            </div>

            <div class="banner-section">
                <div class="banner-title">Select Proposal</div>
                <div class="proposal-selector">
                    <button class="proposal-btn active" onclick="setProposal('union')">
                        Union Proposal<br>
                        <small style="opacity: 0.8;">UESF</small>
                    </button>
                    <button class="proposal-btn" onclick="setProposal('district')">
                        District Offer<br>
                        <small style="opacity: 0.8;">SFUSD</small>
                    </button>
                    <button class="proposal-btn" onclick="setProposal('panel')">
                        Panel Recommendation<br>
                        <small style="opacity: 0.8;">Factfinding</small>
                    </button>
                    <button class="proposal-btn" onclick="setProposal('custom')">
                        Custom<br>
                        <small style="opacity: 0.8;">Build Your Own</small>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- PROPOSALS PAGE -->
        <div id="proposalsPage" class="page-section active">
            <div class="alert">
                <strong>‚ö†Ô∏è Context:</strong> SFUSD has a $1.2B operating budget for 2025-26, with $114M in cuts already made. 
                The district faces an additional $102M in cuts needed for 2026-27 due to enrollment decline.
            </div>

            <div class="main-content">
                <!-- Left Column: Controls -->
                <div class="card">
                    <h2 id="customControlsTitle" style="display: none;">Custom Controls</h2>

                    <div id="customControls" class="custom-controls">
                        <div class="slider-group">
                            <label>Salary Increase (2-year total)</label>
                            <div class="slider-container">
                                <input type="range" min="0" max="15" step="0.5" value="4" class="slider" id="salarySlider" oninput="updateCustom()">
                                <span class="slider-value" id="salaryValue">4.0%</span>
                            </div>
                        </div>

                        <div class="checkbox-group">
                            <input type="checkbox" id="healthBenefits" onchange="updateCustom()">
                            <label for="healthBenefits">Family Health Benefits ($11-14M/yr)</label>
                        </div>

                        <div class="checkbox-group">
                            <input type="checkbox" id="specialEd" onchange="updateCustom()">
                            <label for="specialEd">Special Ed Workload Model ($22M/yr)</label>
                        </div>

                        <div class="checkbox-group">
                            <input type="checkbox" id="classSize" onchange="updateCustom()">
                            <label for="classSize">Class Size Limits (~$5M)</label>
                        </div>

                        <div class="checkbox-group">
                            <input type="checkbox" id="staffing" onchange="updateCustom()">
                            <label for="staffing">Full Staffing (Nurses/Counselors) ($82.1M/yr)</label>
                        </div>

                        <div class="checkbox-group">
                            <input type="checkbox" id="specialEdPilot" onchange="updateCustom()">
                            <label for="specialEdPilot">Special Ed Pilot Program (est. $2-3M/yr)</label>
                        </div>
                    </div>

                    <div style="margin-top: 30px;">
                        <h2>Key Budget Facts</h2>
                        <div class="info-grid">
                            <div class="info-card">
                                <h3>Operating Budget</h3>
                                <div class="value">$1.2B</div>
                            </div>
                            <div class="info-card">
                                <h3>Cost Per 1% Raise</h3>
                                <div class="value">$10.17M</div>
                            </div>
                            <div class="info-card">
                                <h3>Board Reserve</h3>
                                <div class="value">$111M</div>
                            </div>
                            <div class="info-card">
                                <h3>State Reserve (Required)</h3>
                                <div class="value">$28M</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Column: Results -->
                <div class="card">
                    <h2>Budget Impact Analysis</h2>
                    
                    <div id="costBreakdown">
                        <!-- Populated by JavaScript -->
                    </div>

                    <div class="budget-bar">
                        <div class="budget-bar-label">
                            <span>Impact on Available Reserves ($111M Board Reserve)</span>
                            <span id="reservePercentage">0%</span>
                        </div>
                        <div class="budget-bar-track">
                            <div class="budget-bar-fill" id="budgetBarFill" style="width: 0%">
                                <span id="budgetBarText"></span>
                            </div>
                        </div>
                    </div>

                    <div id="impactSummary" class="impact-summary positive">
                        <!-- Populated by JavaScript -->
                    </div>

                    <div class="next-step-banner">
                        <h3>‚ö†Ô∏è Budget Reality Check</h3>
                        <p>
                            Regardless of which proposal is accepted, SFUSD must still cut approximately <strong>$102 million</strong> 
                            from the 2026-27 budget due to declining enrollment and the structural deficit. The labor contract costs 
                            add to this challenge.
                        </p>
                        <button onclick="switchPage('cuts')">
                            Proceed to Budget Cuts Simulator ‚Üí
                        </button>
                    </div>

                    <div style="margin-top: 30px;">
                        <h2>Proposal Comparison</h2>
                        <table class="comparison-table">
                            <thead>
                                <tr>
                                    <th>Item</th>
                                    <th>Union</th>
                                    <th>District</th>
                                    <th>Panel</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Salary Increase</td>
                                    <td>9% (4.5%/yr)</td>
                                    <td>4% (2%/yr)</td>
                                    <td>6% (3%/yr)</td>
                                </tr>
                                <tr>
                                    <td>Family Health Benefits</td>
                                    <td>$11-14M/yr</td>
                                    <td>Use parcel tax</td>
                                    <td>Parcel tax bridge</td>
                                </tr>
                                <tr>
                                    <td>Special Education</td>
                                    <td>Workload model</td>
                                    <td>Status quo</td>
                                    <td>Pilot program</td>
                                </tr>
                                <tr>
                                    <td>Class Size</td>
                                    <td>Hard limits</td>
                                    <td>Goals (status quo)</td>
                                    <td>Goals (status quo)</td>
                                </tr>
                                <tr>
                                    <td>Full Staffing</td>
                                    <td>$82.1M/yr</td>
                                    <td>Status quo</td>
                                    <td>Status quo</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>üìä Understanding the Numbers</h2>
                <div style="line-height: 1.8;">
                    <p><strong>Ongoing vs. One-Time Costs:</strong> Salary increases and new staffing positions are <em>ongoing costs</em> that must be paid every year. The Board Reserve ($111M) is primarily one-time money that, once spent, cannot sustain permanent salary increases.</p>
                    
                    <p style="margin-top: 15px;"><strong>What Are Reserves For?</strong> The Board Reserve is meant to be a financial cushion for <em>emergencies and unexpected events</em> ‚Äî like natural disasters, sudden enrollment drops, or economic downturns. It's designed to protect classrooms from abrupt mid-year cuts when revenue unexpectedly falls short. Using reserves for ongoing expenses (like permanent salary increases) means the district would have no safety net when the next crisis hits.</p>
                    
                    <p style="margin-top: 15px;"><strong>The Structural Deficit:</strong> SFUSD faces declining enrollment (down 9.42% in Average Daily Attendance), which means less state funding. The district has already cut $114M and needs to find another $102M in cuts for 2026-27.</p>
                    
                    <p style="margin-top: 15px;"><strong>Reserve Context:</strong> While California requires only 2% reserves ($28M), the state recommends 17% as best practice ($204M). SFUSD's board reserve of $111M represents about 8% of the general fund ‚Äî still below the recommended level.</p>

                    <p style="margin-top: 15px;"><strong>Strike Costs:</strong> If schools close during a strike, SFUSD would lose $7-10 million per day in state penalties for ceasing instruction.</p>
                </div>
            </div>
        </div>

        <!-- CUTS PAGE -->
        <div id="cutsPage" class="page-section">
            <div class="alert cuts-alert">
                <strong>The Budget Reality:</strong>
                SFUSD needs to cut approximately $102 million for 2026-27 due to declining enrollment (down 9.42%), 
                expiring COVID relief funds, and the structural deficit. Additionally, the labor proposal you selected adds 
                ongoing costs that must be funded.
            </div>

            <div class="card cuts-section">
                <h2>Budget Challenge Summary</h2>
                
                <div id="proposalCostSummary" style="background: #e0e7ff; padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #667eea;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <strong style="color: #667eea; font-size: 1.1rem;">Selected Proposal Cost:</strong>
                        <span id="selectedProposalName" style="font-weight: 600; color: #667eea;">Union Proposal</span>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; font-size: 0.95rem;">
                        <div>
                            <span style="color: #666;">Annual Cost:</span>
                            <strong id="proposalAnnualCost" style="color: #333; margin-left: 5px;">$0.0M</strong>
                        </div>
                        <div>
                            <span style="color: #666;">2-Year Cost:</span>
                            <strong id="proposal2YearCost" style="color: #333; margin-left: 5px;">$0.0M</strong>
                        </div>
                    </div>
                </div>

                <div class="info-grid">
                    <div class="info-card cuts-card">
                        <h3>Base Deficit (2026-27)</h3>
                        <div class="value">$102M</div>
                    </div>
                    <div class="info-card cuts-card">
                        <h3>Labor Proposal Cost (Annual)</h3>
                        <div class="value" id="laborCostCard">$0.0M</div>
                    </div>
                    <div class="info-card cuts-card">
                        <h3>Total Gap to Close</h3>
                        <div class="value" id="totalGap">$102.0M</div>
                    </div>
                    <div class="info-card cuts-card">
                        <h3>Reserve Available</h3>
                        <div class="value">$111M</div>
                    </div>
                </div>

                <div style="background: #f8f9ff; padding: 20px; border-radius: 8px; margin-top: 20px; border-left: 4px solid #667eea;">
                    <h3 style="color: #667eea; margin-bottom: 15px; font-size: 1.1rem;">üí∞ Use Board Reserve (One-Time Money)</h3>
                    <p style="color: #666; font-size: 0.9rem; margin-bottom: 15px; line-height: 1.6;">
                        You can use the $111M Board Reserve to cover <strong>one-time</strong> costs or to bridge funding gaps. 
                        However, reserves cannot sustainably fund ongoing expenses like permanent salary increases. Once spent, 
                        the money is gone and cannot be relied upon for future years.
                    </p>
                    <div class="slider-group">
                        <label>Amount of Reserve to Use (One-Time)</label>
                        <div class="slider-container">
                            <input type="range" min="0" max="111" step="1" value="0" class="slider" id="reserveSlider" 
                                oninput="updateReserveUsage()" style="background: #667eea;">
                            <span class="slider-value" id="reserveValue" style="color: #667eea;">$0M</span>
                        </div>
                    </div>
                    <div style="margin-top: 10px; padding: 10px; background: #fef3c7; border-radius: 6px; font-size: 0.85rem; color: #78350f;">
                        ‚ö†Ô∏è <strong>Remember:</strong> Using reserves for ongoing costs (like salary increases) means you'll face an even larger deficit next year when the reserve money runs out.
                    </div>
                </div>

                <div class="progress-section">
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; font-size: 0.95rem;">
                            <div>
                                <div style="color: #666; font-size: 0.85rem; margin-bottom: 5px;">Base Deficit:</div>
                                <div style="font-weight: 700; color: #dc2626; font-size: 1.2rem;">$102.0M</div>
                            </div>
                            <div>
                                <div style="color: #666; font-size: 0.85rem; margin-bottom: 5px;">+ Labor Proposal:</div>
                                <div style="font-weight: 700; color: #dc2626; font-size: 1.2rem;" id="laborCostDisplay">$0.0M</div>
                            </div>
                            <div>
                                <div style="color: #666; font-size: 0.85rem; margin-bottom: 5px;">- Reserve Used:</div>
                                <div style="font-weight: 700; color: #10b981; font-size: 1.2rem;" id="reserveUsedDisplay">$0.0M</div>
                            </div>
                            <div>
                                <div style="color: #666; font-size: 0.85rem; margin-bottom: 5px;">- Cuts Made:</div>
                                <div style="font-weight: 700; color: #10b981; font-size: 1.2rem;" id="cutsMadeDisplay">$0.0M</div>
                            </div>
                            <div style="border-left: 3px solid #dc2626; padding-left: 15px;">
                                <div style="color: #666; font-size: 0.85rem; margin-bottom: 5px;">= Still Needed:</div>
                                <div style="font-weight: 700; color: #dc2626; font-size: 1.4rem;" id="stillNeededDisplay">$102.0M</div>
                            </div>
                        </div>
                    </div>

                    <div class="progress-label">
                        <span>Progress Toward Balanced Budget</span>
                        <span id="progressPercent">0%</span>
                    </div>
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="progressBar" style="width: 0%">
                            <span id="progressText"></span>
                        </div>
                    </div>
                </div>

                <div id="statusMessage" class="status-message deficit">
                    üö® You still need to cut $102.0 million to balance the budget.
                </div>
            </div>

            <div class="card cuts-section">
                <h2>Select Budget Cuts</h2>
                <p style="color: #666; margin-bottom: 20px;">
                    Check the boxes below to implement cuts. Some items allow you to choose the level of reduction.
                </p>

                <div class="category-header">
                    <h3>üë• Staffing Reductions</h3>
                </div>
                <div class="cuts-grid">
                    <div class="cut-item has-slider" data-cut-id="social-workers">
                        <div class="cut-header">
                            <div class="cut-title">School Social Workers</div>
                            <div class="cut-amount" id="amount-social-workers">$0.0M</div>
                        </div>
                        <div class="cut-description">
                            Reduce school-site social workers. Currently provides counseling, crisis support, and family connections. 
                            Proposed cut: up to 45 full-time positions.
                        </div>
                        <div class="cut-controls" onclick="event.stopPropagation()">
                            <div class="cut-slider-container" style="display: block;" onclick="event.stopPropagation()">
                                <input type="range" min="0" max="100" value="0" class="cut-slider" id="slider-social-workers" 
                                    oninput="updateSliderCut('social-workers', 5.4)">
                                <div class="slider-label" id="label-social-workers">0% of positions (0 FTE)</div>
                            </div>
                        </div>
                        <div class="impact-note">
                            üíî <strong>Impact:</strong> Reduced mental health support, less crisis intervention capacity, fewer resources for trauma-affected students
                        </div>
                    </div>

                    <div class="cut-item has-slider" data-cut-id="security">
                        <div class="cut-header">
                            <div class="cut-title">School Security Staff</div>
                            <div class="cut-amount" id="amount-security">$0.0M</div>
                        </div>
                        <div class="cut-description">
                            Reduce campus security aides. Proposed: cut security staffing by up to 50% across schools.
                        </div>
                        <div class="cut-controls" onclick="event.stopPropagation()">
                            <div class="cut-slider-container" style="display: block;" onclick="event.stopPropagation()">
                                <input type="range" min="0" max="100" value="0" class="cut-slider" id="slider-security" 
                                    oninput="updateSliderCut('security', 3.2)">
                                <div class="slider-label" id="label-security">0% reduction</div>
                            </div>
                        </div>
                        <div class="impact-note">
                            üö® <strong>Impact:</strong> Reduced campus safety monitoring, slower response to incidents, increased safety concerns
                        </div>
                    </div>

                    <div class="cut-item has-slider" data-cut-id="teachers">
                        <div class="cut-header">
                            <div class="cut-title">Classroom Teachers</div>
                            <div class="cut-amount" id="amount-teachers">$0.0M</div>
                        </div>
                        <div class="cut-description">
                            Reduce teaching positions through attrition and strategic reductions. District trying to minimize teacher layoffs.
                        </div>
                        <div class="cut-controls" onclick="event.stopPropagation()">
                            <div class="cut-slider-container" style="display: block;" onclick="event.stopPropagation()">
                                <input type="range" min="0" max="100" value="0" class="cut-slider" id="slider-teachers" 
                                    oninput="updateSliderCut('teachers', 15.0)">
                                <div class="slider-label" id="label-teachers">0 teaching positions</div>
                            </div>
                        </div>
                        <div class="impact-note">
                            üìö <strong>Impact:</strong> Larger class sizes, fewer course offerings, reduced individual attention for students
                        </div>
                    </div>

                    <div class="cut-item has-slider" data-cut-id="counselors">
                        <div class="cut-header">
                            <div class="cut-title">School Counselors</div>
                            <div class="cut-amount" id="amount-counselors">$0.0M</div>
                        </div>
                        <div class="cut-description">
                            Reduce school counselor positions. Counselors support academic planning, college/career readiness, and student wellness.
                        </div>
                        <div class="cut-controls" onclick="event.stopPropagation()">
                            <div class="cut-slider-container" style="display: block;" onclick="event.stopPropagation()">
                                <input type="range" min="0" max="100" value="0" class="cut-slider" id="slider-counselors" 
                                    oninput="updateSliderCut('counselors', 4.5)">
                                <div class="slider-label" id="label-counselors">0% of positions</div>
                            </div>
                        </div>
                        <div class="impact-note">
                            üéì <strong>Impact:</strong> Less college/career guidance, reduced academic counseling, fewer mental health check-ins
                        </div>
                    </div>

                    <div class="cut-item" data-cut-id="central-office" onclick="toggleCut('central-office', event)">
                        <div class="cut-header">
                            <div class="cut-title">Central Office Staff</div>
                            <div class="cut-amount">$12.0M</div>
                        </div>
                        <div class="cut-description">
                            Further reduce central administration positions beyond the 200 already eliminated. SFUSD spends 83% more 
                            on central admin than peer districts.
                        </div>
                        <div class="cut-controls">
                            <input type="checkbox" class="cut-checkbox" id="check-central-office" style="display: none;">
                            <div style="font-size: 0.85rem; color: #666; font-style: italic;">Click card to select</div>
                        </div>
                        <div class="impact-note">
                            üíº <strong>Impact:</strong> Slower district processes, reduced support for schools, potential compliance issues
                        </div>
                    </div>
                </div>

                <div class="category-header">
                    <h3>üöå Programs & Services</h3>
                </div>
                <div class="cuts-grid">
                    <div class="cut-item" data-cut-id="bus-service" onclick="toggleCut('bus-service', event)" >
                        <div class="cut-header">
                            <div class="cut-title">School Bus Service</div>
                            <div class="cut-amount">$8.5M</div>
                        </div>
                        <div class="cut-description">
                            Eliminate general education bus service. Would maintain only buses for special education students as required by law.
                        </div>
                        <div class="cut-controls">
                            <input type="checkbox" class="cut-checkbox" id="check-bus-service" style="display: none;">
                            <div style="font-size: 0.85rem; color: #666; font-style: italic;">Click card to select</div>
                        </div>
                        <div class="impact-note">
                            üö∏ <strong>Impact:</strong> Transportation burden on families, reduced access for low-income students, possible enrollment decline
                        </div>
                    </div>

                    <div class="cut-item" data-cut-id="health-wellness" onclick="toggleCut('health-wellness', event)" >
                        <div class="cut-header">
                            <div class="cut-title">Health & Wellness Programs</div>
                            <div class="cut-amount">$6.2M</div>
                        </div>
                        <div class="cut-description">
                            Eliminate or significantly reduce health and wellness programs at middle schools, including physical education 
                            specialists and health education.
                        </div>
                        <div class="cut-controls">
                            <input type="checkbox" class="cut-checkbox" id="check-health-wellness" style="display: none;">
                            <div style="font-size: 0.85rem; color: #666; font-style: italic;">Click card to select</div>
                        </div>
                        <div class="impact-note">
                            üèÉ <strong>Impact:</strong> Reduced PE instruction, fewer health education programs, less support for student wellness
                        </div>
                    </div>

                    <div class="cut-item" data-cut-id="seven-period" onclick="toggleCut('seven-period', event)" >
                        <div class="cut-header">
                            <div class="cut-title">Seven-Period Day Elimination</div>
                            <div class="cut-amount">$7.8M</div>
                        </div>
                        <div class="cut-description">
                            Move from seven-period to six-period school day. Reduces course offerings and elective options for students.
                        </div>
                        <div class="cut-controls">
                            <input type="checkbox" class="cut-checkbox" id="check-seven-period" style="display: none;">
                            <div style="font-size: 0.85rem; color: #666; font-style: italic;">Click card to select</div>
                        </div>
                        <div class="impact-note">
                            üìñ <strong>Impact:</strong> Fewer electives, reduced arts/music access, less flexibility in student schedules
                        </div>
                    </div>

                    <div class="cut-item" data-cut-id="ela-support" onclick="toggleCut('ela-support', event)" >
                        <div class="cut-header">
                            <div class="cut-title">English Learner Support</div>
                            <div class="cut-amount">$4.8M</div>
                        </div>
                        <div class="cut-description">
                            Reduce funding for English-language learner programs and support staff.
                        </div>
                        <div class="cut-controls">
                            <input type="checkbox" class="cut-checkbox" id="check-ela-support" style="display: none;">
                            <div style="font-size: 0.85rem; color: #666; font-style: italic;">Click card to select</div>
                        </div>
                        <div class="impact-note">
                            üåç <strong>Impact:</strong> Less support for immigrant students, reduced language acquisition resources, equity concerns
                        </div>
                    </div>

                    <div class="cut-item" data-cut-id="professional-dev" onclick="toggleCut('professional-dev', event)" >
                        <div class="cut-header">
                            <div class="cut-title">Professional Development</div>
                            <div class="cut-amount">$3.5M</div>
                        </div>
                        <div class="cut-description">
                            Reduce teacher training, workshops, and professional development opportunities.
                        </div>
                        <div class="cut-controls">
                            <input type="checkbox" class="cut-checkbox" id="check-professional-dev" style="display: none;">
                            <div style="font-size: 0.85rem; color: #666; font-style: italic;">Click card to select</div>
                        </div>
                        <div class="impact-note">
                            üë®‚Äçüè´ <strong>Impact:</strong> Less teacher training on new methods, reduced support for new teachers, stagnant teaching quality
                        </div>
                    </div>

                    <div class="cut-item" data-cut-id="student-internships" onclick="toggleCut('student-internships', event)" >
                        <div class="cut-header">
                            <div class="cut-title">Student Internship Programs</div>
                            <div class="cut-amount">$2.1M</div>
                        </div>
                        <div class="cut-description">
                            Eliminate or reduce career exploration and internship opportunities for high school students.
                        </div>
                        <div class="cut-controls">
                            <input type="checkbox" class="cut-checkbox" id="check-student-internships" style="display: none;">
                            <div style="font-size: 0.85rem; color: #666; font-style: italic;">Click card to select</div>
                        </div>
                        <div class="impact-note">
                            üíº <strong>Impact:</strong> Fewer career-readiness opportunities, reduced work experience for students
                        </div>
                    </div>
                </div>

                <div class="category-header">
                    <h3>üè´ Facilities & Operations</h3>
                </div>
                <div class="cuts-grid">
                    <div class="cut-item has-slider" data-cut-id="school-closures">
                        <div class="cut-header">
                            <div class="cut-title">School Consolidations/Closures</div>
                            <div class="cut-amount" id="amount-school-closures">$0.0M</div>
                        </div>
                        <div class="cut-description">
                            Close or consolidate underutilized school sites. With enrollment down 9.42%, many schools operate well below capacity. 
                            Each closure saves on facilities, staffing, and operational costs.
                        </div>
                        <div class="cut-controls" onclick="event.stopPropagation()">
                            <div class="cut-slider-container" style="display: block;" onclick="event.stopPropagation()">
                                <input type="range" min="0" max="15" step="1" value="0" class="cut-slider" id="slider-school-closures" 
                                    oninput="updateSchoolClosures()">
                                <div class="slider-label" id="label-school-closures">0 schools</div>
                            </div>
                        </div>
                        <div class="impact-note">
                            üè´ <strong>Impact:</strong> Neighborhood school loss, longer commutes, community disruption, political controversy
                        </div>
                    </div>

                    <div class="cut-item" data-cut-id="facilities-maintenance" onclick="toggleCut('facilities-maintenance', event)" >
                        <div class="cut-header">
                            <div class="cut-title">Facilities Maintenance</div>
                            <div class="cut-amount">$5.5M</div>
                        </div>
                        <div class="cut-description">
                            Defer non-urgent maintenance and facilities upgrades. Reduce custodial and maintenance staffing.
                        </div>
                        <div class="cut-controls">
                            <input type="checkbox" class="cut-checkbox" id="check-facilities-maintenance" style="display: none;">
                            <div style="font-size: 0.85rem; color: #666; font-style: italic;">Click card to select</div>
                        </div>
                        <div class="impact-note">
                            üîß <strong>Impact:</strong> Deteriorating facilities, potential health/safety issues, higher costs later
                        </div>
                    </div>

                    <div class="cut-item" data-cut-id="technology" onclick="toggleCut('technology', event)" >
                        <div class="cut-header">
                            <div class="cut-title">Technology & IT</div>
                            <div class="cut-amount">$4.2M</div>
                        </div>
                        <div class="cut-description">
                            Reduce IT support staff, delay Chromebook replacements, cut software licenses and technology upgrades.
                        </div>
                        <div class="cut-controls">
                            <input type="checkbox" class="cut-checkbox" id="check-technology" style="display: none;">
                            <div style="font-size: 0.85rem; color: #666; font-style: italic;">Click card to select</div>
                        </div>
                        <div class="impact-note">
                            üíª <strong>Impact:</strong> Slower tech support, aging devices, reduced digital learning tools
                        </div>
                    </div>
                </div>

                <div class="category-header">
                    <h3>üìä Administrative Efficiency</h3>
                </div>
                <div class="cuts-grid">
                    <div class="cut-item" data-cut-id="consultants" onclick="toggleCut('consultants', event)" >
                        <div class="cut-header">
                            <div class="cut-title">External Consultants</div>
                            <div class="cut-amount">$8.0M</div>
                        </div>
                        <div class="cut-description">
                            Significantly reduce spending on external consultants and contractors. Union argues district overspends on outside services.
                        </div>
                        <div class="cut-controls">
                            <input type="checkbox" class="cut-checkbox" id="check-consultants" style="display: none;">
                            <div style="font-size: 0.85rem; color: #666; font-style: italic;">Click card to select</div>
                        </div>
                        <div class="impact-note">
                            üìã <strong>Impact:</strong> Less external expertise, reliance on internal capacity, possible slower project delivery
                        </div>
                    </div>

                    <div class="cut-item" data-cut-id="overhead" onclick="toggleCut('overhead', event)" >
                        <div class="cut-header">
                            <div class="cut-title">District Overhead Reduction</div>
                            <div class="cut-amount">$6.5M</div>
                        </div>
                        <div class="cut-description">
                            Cut administrative overhead including supplies, equipment, travel, conferences, and discretionary spending.
                        </div>
                        <div class="cut-controls">
                            <input type="checkbox" class="cut-checkbox" id="check-overhead" style="display: none;">
                            <div style="font-size: 0.85rem; color: #666; font-style: italic;">Click card to select</div>
                        </div>
                        <div class="impact-note">
                            üìé <strong>Impact:</strong> Reduced resources for staff, less professional networking, potential efficiency loss
                        </div>
                    </div>
                </div>

                <div class="category-header">
                    <h3>üé® Arts, Athletics & Enrichment (PEEF-funded)</h3>
                </div>
                <div class="cuts-grid">
                    <div class="cut-item has-slider" data-cut-id="athletics">
                        <div class="cut-header">
                            <div class="cut-title">Athletics Programs</div>
                            <div class="cut-amount" id="amount-athletics">$0.0M</div>
                        </div>
                        <div class="cut-description">
                            Reduce sports programs across schools. PEEF funds athletics coaches, equipment, and competitions. 
                            Could reduce offerings or eliminate some sports entirely.
                        </div>
                        <div class="cut-controls" onclick="event.stopPropagation()">
                            <div class="cut-slider-container" style="display: block;" onclick="event.stopPropagation()">
                                <input type="range" min="0" max="100" value="0" class="cut-slider" id="slider-athletics" 
                                    oninput="updateSliderCut('athletics', 12.0)">
                                <div class="slider-label" id="label-athletics">0% reduction</div>
                            </div>
                        </div>
                        <div class="impact-note">
                            ‚öΩ <strong>Impact:</strong> Fewer sports teams, reduced physical activity, less college recruiting opportunities
                        </div>
                    </div>

                    <div class="cut-item has-slider" data-cut-id="arts-music">
                        <div class="cut-header">
                            <div class="cut-title">Arts & Music Programs</div>
                            <div class="cut-amount" id="amount-arts-music">$0.0M</div>
                        </div>
                        <div class="cut-description">
                            Reduce arts and music instruction. Could mean fewer music teachers, reduced art supplies, 
                            elimination of some programs like band, orchestra, or visual arts.
                        </div>
                        <div class="cut-controls" onclick="event.stopPropagation()">
                            <div class="cut-slider-container" style="display: block;" onclick="event.stopPropagation()">
                                <input type="range" min="0" max="100" value="0" class="cut-slider" id="slider-arts-music" 
                                    oninput="updateSliderCut('arts-music', 15.0)">
                                <div class="slider-label" id="label-arts-music">0% reduction</div>
                            </div>
                        </div>
                        <div class="impact-note">
                            üé® <strong>Impact:</strong> Reduced creative expression, fewer enrichment opportunities, less college portfolio development
                        </div>
                    </div>

                    <div class="cut-item has-slider" data-cut-id="libraries">
                        <div class="cut-header">
                            <div class="cut-title">School Libraries & Librarians</div>
                            <div class="cut-amount" id="amount-libraries">$0.0M</div>
                        </div>
                        <div class="cut-description">
                            Reduce library staffing or hours. PEEF currently ensures every school has a credentialed librarian. 
                            Could reduce to part-time or share librarians between schools.
                        </div>
                        <div class="cut-controls" onclick="event.stopPropagation()">
                            <div class="cut-slider-container" style="display: block;" onclick="event.stopPropagation()">
                                <input type="range" min="0" max="100" value="0" class="cut-slider" id="slider-libraries" 
                                    oninput="updateSliderCut('libraries', 10.0)">
                                <div class="slider-label" id="label-libraries">0% reduction</div>
                            </div>
                        </div>
                        <div class="impact-note">
                            üìö <strong>Impact:</strong> Limited library access, reduced literacy support, fewer research resources
                        </div>
                    </div>
                </div>

                <div class="category-header">
                    <h3>üë®‚Äçüë©‚Äçüëß Support Staff & Specialists</h3>
                </div>
                <div class="cuts-grid">
                    <div class="cut-item" data-cut-id="coaches-trainers" onclick="toggleCut('coaches-trainers', event)" >
                        <div class="cut-header">
                            <div class="cut-title">Instructional Coaches & Trainers</div>
                            <div class="cut-amount">$7.5M</div>
                        </div>
                        <div class="cut-description">
                            Eliminate or reduce instructional coaches who support teachers in classroom practices, 
                            curriculum implementation, and professional growth.
                        </div>
                        <div class="cut-controls">
                            <input type="checkbox" class="cut-checkbox" id="check-coaches-trainers" style="display: none;">
                            <div style="font-size: 0.85rem; color: #666; font-style: italic;">Click card to select</div>
                        </div>
                        <div class="impact-note">
                            üë©‚Äçüè´ <strong>Impact:</strong> Less teacher support, slower professional development, reduced instructional quality
                        </div>
                    </div>

                    <div class="cut-item" data-cut-id="parent-liaisons" onclick="toggleCut('parent-liaisons', event)" >
                        <div class="cut-header">
                            <div class="cut-title">Parent Liaisons & Community Coordinators</div>
                            <div class="cut-amount">$4.2M</div>
                        </div>
                        <div class="cut-description">
                            Reduce staff dedicated to parent engagement, community partnerships, and family support services.
                        </div>
                        <div class="cut-controls">
                            <input type="checkbox" class="cut-checkbox" id="check-parent-liaisons" style="display: none;">
                            <div style="font-size: 0.85rem; color: #666; font-style: italic;">Click card to select</div>
                        </div>
                        <div class="impact-note">
                            ü§ù <strong>Impact:</strong> Reduced family engagement, less parent communication, weaker community connections
                        </div>
                    </div>

                    <div class="cut-item" data-cut-id="wellness-centers" onclick="toggleCut('wellness-centers', event)" >
                        <div class="cut-header">
                            <div class="cut-title">School Wellness Centers</div>
                            <div class="cut-amount">$5.8M</div>
                        </div>
                        <div class="cut-description">
                            Close or reduce hours at school-based wellness centers that provide health services, 
                            counseling, and support for students.
                        </div>
                        <div class="cut-controls">
                            <input type="checkbox" class="cut-checkbox" id="check-wellness-centers" style="display: none;">
                            <div style="font-size: 0.85rem; color: #666; font-style: italic;">Click card to select</div>
                        </div>
                        <div class="impact-note">
                            üè• <strong>Impact:</strong> Less accessible health services, reduced mental health support, more barriers to care
                        </div>
                    </div>

                    <div class="cut-item" data-cut-id="language-programs" onclick="toggleCut('language-programs', event)" >
                        <div class="cut-header">
                            <div class="cut-title">Language Immersion Programs</div>
                            <div class="cut-amount">$6.3M</div>
                        </div>
                        <div class="cut-description">
                            Reduce or eliminate specialized language immersion programs (Spanish, Mandarin, etc.) 
                            or transition them to standard language classes.
                        </div>
                        <div class="cut-controls">
                            <input type="checkbox" class="cut-checkbox" id="check-language-programs" style="display: none;">
                            <div style="font-size: 0.85rem; color: #666; font-style: italic;">Click card to select</div>
                        </div>
                        <div class="impact-note">
                            üåç <strong>Impact:</strong> Loss of unique programs, reduced bilingual opportunities, enrollment decline risk
                        </div>
                    </div>

                    <div class="cut-item" data-cut-id="career-pathways" onclick="toggleCut('career-pathways', event)" >
                        <div class="cut-header">
                            <div class="cut-title">Career Pathway Programs</div>
                            <div class="cut-amount">$5.2M</div>
                        </div>
                        <div class="cut-description">
                            Reduce specialized career and technical education programs including biotech, 
                            engineering, culinary arts, and other vocational training.
                        </div>
                        <div class="cut-controls">
                            <input type="checkbox" class="cut-checkbox" id="check-career-pathways" style="display: none;">
                            <div style="font-size: 0.85rem; color: #666; font-style: italic;">Click card to select</div>
                        </div>
                        <div class="impact-note">
                            üíº <strong>Impact:</strong> Fewer job-ready skills, reduced vocational options, less career preparation
                        </div>
                    </div>
                </div>
            </div>

            <div class="card cuts-section">
                <h2>üìö Context & Background</h2>
                <div style="line-height: 1.8;">
                    <p><strong>Why These Cuts?</strong> SFUSD enrollment has declined 9.42% (measured by Average Daily Attendance), 
                    meaning less state funding since California funds districts per student. COVID relief funds have also expired, 
                    creating a $102M structural deficit for 2026-27.</p>
                    
                    <p style="margin-top: 15px;"><strong>Already Cut:</strong> The district already made $114 million in cuts for 
                    2025-26, including 200 central office positions through early retirement programs. The district has tried to 
                    avoid teacher layoffs but must now make deeper reductions.</p>
                    
                    <p style="margin-top: 15px;"><strong>School Closures Controversy:</strong> SFUSD paused a plan for widespread 
                    school closures in fall 2024 after intense community backlash. However, with many schools operating well below 
                    capacity, closures may be necessary for fiscal stability.</p>

                    <p style="margin-top: 15px;"><strong>Union Opposition:</strong> The teachers union has strongly opposed many 
                    proposed cuts, arguing the district should reduce consultant spending and central administration instead of 
                    frontline services. This tension contributed to the strike authorization vote.</p>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>Data sources: SFUSD Factfinding Report (Feb 4, 2026), SFUSD Budget Documents, Mission Local, SF Standard</p>
            <p style="margin-top: 10px;">This is an educational tool to understand budget trade-offs. Not affiliated with SFUSD or UESF.</p>
        </div>
    </div>

    <script>
        // ========== PROPOSALS PAGE LOGIC ==========
        const COST_PER_PERCENT = 10.17;
        const HEALTH_BENEFITS_MIN = 11;
        const HEALTH_BENEFITS_MAX = 14;
        const HEALTH_BENEFITS_AVG = 12.5;
        const SPECIAL_ED_WORKLOAD = 22;
        const CLASS_SIZE_LIMITS = 5;
        const FULL_STAFFING = 82.1;
        const SPECIAL_ED_PILOT = 2.5;
        const BOARD_RESERVE = 111;

        const proposals = {
            union: {
                salaryIncrease: 9,
                healthBenefits: true,
                specialEd: true,
                classSize: true,
                staffing: true,
                specialEdPilot: false
            },
            district: {
                salaryIncrease: 4,
                healthBenefits: false,
                specialEd: false,
                classSize: false,
                staffing: false,
                specialEdPilot: false
            },
            panel: {
                salaryIncrease: 6,
                healthBenefits: false,
                specialEd: false,
                classSize: false,
                staffing: false,
                specialEdPilot: true
            }
        };

        let currentProposal = 'union';

        function setProposal(proposalType) {
            currentProposal = proposalType;
            
            document.querySelectorAll('.proposal-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.closest('.proposal-btn').classList.add('active');

            const customControls = document.getElementById('customControls');
            const customTitle = document.getElementById('customControlsTitle');
            if (proposalType === 'custom') {
                customControls.classList.add('active');
                customTitle.style.display = 'block';
            } else {
                customControls.classList.remove('active');
                customTitle.style.display = 'none';
            }

            if (proposalType !== 'custom') {
                updateDisplay(proposalType);
            } else {
                updateCustom();
            }
            
            // Also update cuts page if it's visible
            if (document.getElementById('cutsPage').classList.contains('active')) {
                updateLaborCostInCuts();
            }
        }

        function updateCustom() {
            const salaryIncrease = parseFloat(document.getElementById('salarySlider').value);
            const healthBenefits = document.getElementById('healthBenefits').checked;
            const specialEd = document.getElementById('specialEd').checked;
            const classSize = document.getElementById('classSize').checked;
            const staffing = document.getElementById('staffing').checked;
            const specialEdPilot = document.getElementById('specialEdPilot').checked;

            document.getElementById('salaryValue').textContent = salaryIncrease.toFixed(1) + '%';

            const customProposal = {
                salaryIncrease,
                healthBenefits,
                specialEd,
                classSize,
                staffing,
                specialEdPilot
            };

            updateDisplay('custom', customProposal);
            
            // Also update cuts page if it's visible
            if (document.getElementById('cutsPage').classList.contains('active')) {
                updateLaborCostInCuts();
            }
        }

        function calculateCosts(proposal) {
            const config = proposal === 'custom' ? 
                arguments[1] : proposals[proposal];

            // Year 1 (2026-27) salary cost
            // For a 2-year X% total raise, Year 1 gets (X/2)%
            const year1SalaryCost = (config.salaryIncrease / 2) * COST_PER_PERCENT;

            const costs = {
                salary: year1SalaryCost,
                healthBenefits: config.healthBenefits ? HEALTH_BENEFITS_AVG : 0,
                specialEd: config.specialEd ? SPECIAL_ED_WORKLOAD : 0,
                classSize: config.classSize ? CLASS_SIZE_LIMITS : 0,
                staffing: config.staffing ? FULL_STAFFING : 0,
                specialEdPilot: config.specialEdPilot ? SPECIAL_ED_PILOT : 0
            };

            costs.total = Object.values(costs).reduce((a, b) => a + b, 0);
            // 2-year impact assumes same costs continue
            costs.twoYearTotal = costs.total * 2;

            return costs;
        }

        function updateDisplay(proposal, customConfig = null) {
            const costs = calculateCosts(proposal, customConfig);

            const costBreakdown = document.getElementById('costBreakdown');
            costBreakdown.innerHTML = `
                ${costs.salary > 0 ? `
                <div class="cost-item">
                    <span class="cost-label">Salary Increases (Year 1: 2026-27)</span>
                    <span class="cost-value">$${costs.salary.toFixed(1)}M</span>
                </div>` : ''}
                ${costs.healthBenefits > 0 ? `
                <div class="cost-item">
                    <span class="cost-label">Family Health Benefits (Annual)</span>
                    <span class="cost-value">$${costs.healthBenefits.toFixed(1)}M</span>
                </div>` : ''}
                ${costs.specialEd > 0 ? `
                <div class="cost-item">
                    <span class="cost-label">Special Ed Workload Model (Annual)</span>
                    <span class="cost-value">$${costs.specialEd.toFixed(1)}M</span>
                </div>` : ''}
                ${costs.specialEdPilot > 0 ? `
                <div class="cost-item">
                    <span class="cost-label">Special Ed Pilot Program (Annual)</span>
                    <span class="cost-value">$${costs.specialEdPilot.toFixed(1)}M</span>
                </div>` : ''}
                ${costs.classSize > 0 ? `
                <div class="cost-item">
                    <span class="cost-label">Class Size Limits (Annual)</span>
                    <span class="cost-value">$${costs.classSize.toFixed(1)}M</span>
                </div>` : ''}
                ${costs.staffing > 0 ? `
                <div class="cost-item">
                    <span class="cost-label">Full Staffing - Nurses/Counselors (Annual)</span>
                    <span class="cost-value">$${costs.staffing.toFixed(1)}M</span>
                </div>` : ''}
                <div class="cost-item total">
                    <span class="cost-label">Total Year 1 Cost (2026-27)</span>
                    <span class="cost-value">$${costs.total.toFixed(1)}M</span>
                </div>
                <div class="cost-item" style="background: #e0e7ff;">
                    <span class="cost-label">2-Year Total (if continued)</span>
                    <span class="cost-value">$${costs.twoYearTotal.toFixed(1)}M</span>
                </div>
            `;

            const reservePercentage = (costs.twoYearTotal / BOARD_RESERVE) * 100;
            const barWidth = Math.min(reservePercentage, 100);
            
            document.getElementById('budgetBarFill').style.width = barWidth + '%';
            document.getElementById('reservePercentage').textContent = reservePercentage.toFixed(1) + '%';
            
            if (barWidth > 0) {
                document.getElementById('budgetBarText').textContent = '$' + costs.twoYearTotal.toFixed(1) + 'M';
            }

            const impactSummary = document.getElementById('impactSummary');
            let summaryClass = 'positive';
            let summaryText = '';

            if (costs.total < 20) {
                summaryClass = 'positive';
                summaryText = `üíö This proposal has a modest annual cost of $${costs.total.toFixed(1)}M, representing ${reservePercentage.toFixed(1)}% of the board reserve over 2 years. This is likely sustainable within current budget constraints.`;
            } else if (costs.total < 50) {
                summaryClass = 'warning';
                summaryText = `‚ö†Ô∏è This proposal costs $${costs.total.toFixed(1)}M annually. Over 2 years, this represents ${reservePercentage.toFixed(1)}% of the $111M board reserve. Some combination of reserve use and ongoing funding adjustments would be needed.`;
            } else if (costs.total < 100) {
                summaryClass = 'critical';
                summaryText = `üö® This proposal costs $${costs.total.toFixed(1)}M annually, representing ${reservePercentage.toFixed(1)}% of board reserves over 2 years. This would require significant structural changes or one-time reserve spending that cannot be sustained long-term.`;
            } else {
                summaryClass = 'critical';
                summaryText = `üö® This proposal costs $${costs.total.toFixed(1)}M annually, far exceeding available reserves. The 2-year cost ($${costs.twoYearTotal.toFixed(1)}M) would consume the entire $111M board reserve and require an additional $${(costs.twoYearTotal - BOARD_RESERVE).toFixed(1)}M in cuts or new revenue.`;
            }

            impactSummary.className = 'impact-summary ' + summaryClass;
            impactSummary.textContent = summaryText;
            
            // Update banner
            updateBanner(costs.total);
        }
        
        function updateBanner(laborCost) {
            const totalGap = 102 + laborCost;
            document.getElementById('bannerTotalGap').textContent = `$${totalGap.toFixed(1)}M`;
            
            if (laborCost > 0) {
                document.getElementById('bannerBreakdown').textContent = 
                    `$102M deficit + $${laborCost.toFixed(1)}M proposal`;
            } else {
                document.getElementById('bannerBreakdown').textContent = 'Base deficit only';
            }
        }

        // ========== CUTS PAGE LOGIC ==========
        const TARGET_CUTS = 102.0;
        let currentLaborCost = 0;
        let currentReserveUsage = 0;

        const fixedCuts = {
            'central-office': 12.0,
            'bus-service': 8.5,
            'health-wellness': 6.2,
            'seven-period': 7.8,
            'ela-support': 4.8,
            'professional-dev': 3.5,
            'student-internships': 2.1,
            'facilities-maintenance': 5.5,
            'technology': 4.2,
            'consultants': 8.0,
            'overhead': 6.5,
            'coaches-trainers': 7.5,
            'parent-liaisons': 4.2,
            'wellness-centers': 5.8,
            'language-programs': 6.3,
            'career-pathways': 5.2
        };

        const variableCuts = {
            'social-workers': { max: 5.4, perUnit: 0.12 },
            'security': { max: 3.2, perPercent: 0.032 },
            'teachers': { max: 15.0, perPosition: 0.1 },
            'counselors': { max: 4.5, perPercent: 0.045 },
            'school-closures': { perSchool: 2.8 },
            'athletics': { max: 12.0, perPercent: 0.12 },
            'arts-music': { max: 15.0, perPercent: 0.15 },
            'libraries': { max: 10.0, perPercent: 0.10 }
        };

        let selectedCuts = {};

        function updateReserveUsage() {
            const slider = document.getElementById('reserveSlider');
            currentReserveUsage = parseFloat(slider.value);
            document.getElementById('reserveValue').textContent = `$${currentReserveUsage.toFixed(0)}M`;
            updateCutsDisplay();
        }

        function updateLaborCostInCuts() {
            // Get the current proposal name
            const proposalNames = {
                'union': 'Union Proposal',
                'district': 'District Offer',
                'panel': 'Panel Recommendation',
                'custom': 'Custom Proposal'
            };
            
            document.getElementById('selectedProposalName').textContent = proposalNames[currentProposal];
            
            // Calculate current labor costs
            const costs = calculateCosts(currentProposal, currentProposal === 'custom' ? {
                salaryIncrease: parseFloat(document.getElementById('salarySlider').value),
                healthBenefits: document.getElementById('healthBenefits').checked,
                specialEd: document.getElementById('specialEd').checked,
                classSize: document.getElementById('classSize').checked,
                staffing: document.getElementById('staffing').checked,
                specialEdPilot: document.getElementById('specialEdPilot').checked
            } : null);
            
            currentLaborCost = costs.total;
            
            document.getElementById('proposalAnnualCost').textContent = `$${costs.total.toFixed(1)}M`;
            document.getElementById('proposal2YearCost').textContent = `$${costs.twoYearTotal.toFixed(1)}M`;
            document.getElementById('laborCostCard').textContent = `$${costs.total.toFixed(1)}M`;
            
            const totalGap = TARGET_CUTS + currentLaborCost;
            document.getElementById('totalGap').textContent = `$${totalGap.toFixed(1)}M`;
            
            updateCutsDisplay();
        }

        function toggleCut(cutId, event) {
            // Stop propagation if event exists (from onclick)
            if (event) {
                event.stopPropagation();
            }
            
            const checkbox = document.getElementById(`check-${cutId}`);
            const cutItem = document.querySelector(`[data-cut-id="${cutId}"]`);
            
            // Toggle checkbox state
            if (checkbox) {
                checkbox.checked = !checkbox.checked;
            }
            
            if (checkbox && checkbox.checked) {
                cutItem.classList.add('selected');
                if (fixedCuts[cutId]) {
                    selectedCuts[cutId] = fixedCuts[cutId];
                } else {
                    selectedCuts[cutId] = 0;
                }
            } else {
                cutItem.classList.remove('selected');
                delete selectedCuts[cutId];
                
                // Reset slider if applicable
                const slider = document.getElementById(`slider-${cutId}`);
                if (slider) {
                    slider.value = 0;
                    updateSliderLabel(cutId, 0);
                }
            }
            
            updateCutsDisplay();
        }

        function updateSliderCut(cutId, maxValue) {
            const slider = document.getElementById(`slider-${cutId}`);
            const percentage = parseFloat(slider.value);
            const amount = (percentage / 100) * maxValue;
            const cutItem = document.querySelector(`[data-cut-id="${cutId}"]`);
            
            // Auto-select when slider moves from 0
            if (percentage > 0) {
                cutItem.classList.add('selected');
                selectedCuts[cutId] = amount;
            } else {
                cutItem.classList.remove('selected');
                delete selectedCuts[cutId];
            }
            
            updateSliderLabel(cutId, percentage);
            updateCutsDisplay();
        }

        function updateSchoolClosures() {
            const slider = document.getElementById('slider-school-closures');
            const numSchools = parseInt(slider.value);
            const amount = numSchools * variableCuts['school-closures'].perSchool;
            const cutItem = document.querySelector(`[data-cut-id="school-closures"]`);
            
            // Auto-select when slider moves from 0
            if (numSchools > 0) {
                cutItem.classList.add('selected');
                selectedCuts['school-closures'] = amount;
            } else {
                cutItem.classList.remove('selected');
                delete selectedCuts['school-closures'];
            }
            
            document.getElementById('label-school-closures').textContent = `${numSchools} school${numSchools !== 1 ? 's' : ''}`;
            document.getElementById('amount-school-closures').textContent = `$${amount.toFixed(1)}M`;
            updateCutsDisplay();
        }

        function updateSliderLabel(cutId, percentage) {
            const label = document.getElementById(`label-${cutId}`);
            const amountElement = document.getElementById(`amount-${cutId}`);
            
            // Safety check
            if (!label || !amountElement) return;
            
            const amount = selectedCuts[cutId] || 0;
            
            if (cutId === 'social-workers') {
                const positions = Math.round((percentage / 100) * 45);
                label.textContent = `${percentage.toFixed(0)}% of positions (${positions} FTE)`;
                amountElement.textContent = `$${amount.toFixed(1)}M`;
            } else if (cutId === 'security') {
                label.textContent = `${percentage.toFixed(0)}% reduction`;
                amountElement.textContent = `$${amount.toFixed(1)}M`;
            } else if (cutId === 'teachers') {
                const positions = Math.round((percentage / 100) * 150);
                label.textContent = `${positions} teaching position${positions !== 1 ? 's' : ''}`;
                amountElement.textContent = `$${amount.toFixed(1)}M`;
            } else if (cutId === 'counselors') {
                label.textContent = `${percentage.toFixed(0)}% of positions`;
                amountElement.textContent = `$${amount.toFixed(1)}M`;
            } else if (cutId === 'athletics' || cutId === 'arts-music' || cutId === 'libraries') {
                label.textContent = `${percentage.toFixed(0)}% reduction`;
                amountElement.textContent = `$${amount.toFixed(1)}M`;
            }
        }

        function updateCutsDisplay() {
            const totalCuts = Object.values(selectedCuts).reduce((sum, val) => sum + val, 0);
            const totalGapNeeded = TARGET_CUTS + currentLaborCost;
            const totalCovered = totalCuts + currentReserveUsage;
            const remaining = totalGapNeeded - totalCovered;
            const percentage = Math.min((totalCovered / totalGapNeeded) * 100, 100);
            
            // Update breakdown display
            document.getElementById('laborCostDisplay').textContent = `$${currentLaborCost.toFixed(1)}M`;
            document.getElementById('reserveUsedDisplay').textContent = `$${currentReserveUsage.toFixed(1)}M`;
            document.getElementById('cutsMadeDisplay').textContent = `$${totalCuts.toFixed(1)}M`;
            document.getElementById('stillNeededDisplay').textContent = `$${Math.max(0, remaining).toFixed(1)}M`;
            
            // Update progress bar
            document.getElementById('progressBar').style.width = percentage + '%';
            document.getElementById('progressPercent').textContent = percentage.toFixed(1) + '%';
            
            if (percentage > 0) {
                document.getElementById('progressText').textContent = `$${totalCovered.toFixed(1)}M`;
            } else {
                document.getElementById('progressText').textContent = '';
            }
            
            // Update status message
            const statusMessage = document.getElementById('statusMessage');
            const reservePercent = (currentReserveUsage / BOARD_RESERVE) * 100;
            
            if (remaining > 5) {
                statusMessage.className = 'status-message deficit';
                let msg = `üö® You still need to close a $${remaining.toFixed(1)}M gap. `;
                if (currentLaborCost > 0) {
                    msg += `This includes the $${currentLaborCost.toFixed(1)}M annual cost of your labor proposal. `;
                }
                if (currentReserveUsage > 0) {
                    msg += `You're using $${currentReserveUsage.toFixed(1)}M (${reservePercent.toFixed(1)}%) of reserves. `;
                }
                statusMessage.textContent = msg;
            } else if (remaining > 0) {
                statusMessage.className = 'status-message deficit';
                statusMessage.textContent = `‚ö†Ô∏è Almost there! You need $${remaining.toFixed(1)}M more to fully balance the budget.`;
            } else if (remaining >= -5) {
                statusMessage.className = 'status-message balanced';
                let msg = `‚úÖ Budget balanced! You've closed the $${totalGapNeeded.toFixed(1)}M gap with $${totalCuts.toFixed(1)}M in cuts`;
                if (currentReserveUsage > 0) {
                    msg += ` and $${currentReserveUsage.toFixed(1)}M from reserves (${reservePercent.toFixed(1)}% of available reserves)`;
                }
                msg += '.';
                
                // Add warning if using reserves for ongoing costs
                if (currentReserveUsage > 0 && currentLaborCost > 0) {
                    msg += ` ‚ö†Ô∏è Note: You're using one-time reserve money to cover $${currentLaborCost.toFixed(1)}M in ongoing labor costs - this creates a deficit in future years.`;
                }
                statusMessage.textContent = msg;
            } else {
                statusMessage.className = 'status-message surplus';
                statusMessage.textContent = `üíô You've balanced the budget with $${Math.abs(remaining).toFixed(1)}M to spare. This provides budgetary cushion.`;
            }
        }

        // ========== PAGE NAVIGATION ==========
        function switchPage(page) {
            document.querySelectorAll('.banner-page-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelectorAll('.page-section').forEach(section => {
                section.classList.remove('active');
            });

            if (page === 'proposals') {
                document.querySelector('.banner-page-tab:first-child').classList.add('active');
                document.getElementById('proposalsPage').classList.add('active');
            } else if (page === 'cuts') {
                document.querySelector('.banner-page-tab:last-child').classList.add('active');
                document.getElementById('cutsPage').classList.add('active');
                // Update labor costs when switching to cuts page
                updateLaborCostInCuts();
            }

            window.scrollTo(0, 0);
        }

        // Initialize
        updateDisplay('union');
        updateCutsDisplay();
    </script>
</body>
</html>
